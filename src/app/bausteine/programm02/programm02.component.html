<div class="colum-center">
    <ng-container *ngIf="SessionListe && (SessionListe.length > 0)">
        <a [ngClass]="['link-button-font', 'HG-01']" mat-flat-button (click)="toggleSessions()">{{ToggleButtonText}}</a>
        <ng-container *ngIf="ModulTyp !== programModul.History">
            <a [ngClass]="['link-button-font', 'HG-01']" mat-flat-button (click)="AdditionalSession()">Additional session</a>
        </ng-container>
                
        <div cdkDropList (cdkDropListDropped)="drop($event)">
            <div *ngFor="let sess of SortedSessionListe, index as i" cdkDrag [cdkDragDisabled]="ModulTyp === programModul.History">
                <div  class='mg-top-1'>
                    <mat-accordion #accSession="matAccordion" multi="true">
                        <mat-expansion-panel 
                            #panSession='matExpansionPanel'                            
                            (opened) = "panelOpened(sess)"
                            (closed) = "panelClosed(sess)" 
                            class="HG-01">
                            <mat-expansion-panel-header [matTooltipDisabled]="ModulTyp === programModul.History" mat-tooltip-panel-below  matTooltip="Hold and drag">
                                <div fxLayout="row wrap" fxLayout.lt-sm="row wrap"  fxLayoutAlign="flex-start center">
                                    <ng-container *ngIf="ModulTyp === programModul.History">
                                        <mat-form-field class="width-300">
                                            <mat-label>{{ProgrammName(sess)}}</mat-label>
                                            <input class="tc-font-size-smaller width-300" matInput [(ngModel)]="sess.Name" type="text" (click)="$event.stopPropagation()" (focusout)="DoSessionName(sess, $event)">
                                        </mat-form-field>
                                    </ng-container>

                                    <ng-container *ngIf="ModulTyp !== programModul.History">
                                        <mat-form-field class="width-300">
                                            <input class="tc-font-size-smaller width-400" matInput [(ngModel)]="sess.Name" type="text" (click)="$event.stopPropagation()" (focusout)="DoSessionName(sess, $event)">
                                        </mat-form-field>
                                    </ng-container>

                                    <ng-container *ngIf="ModulTyp === programModul.History">
                                        <div class="ml-10" fxLayout="column" fxFlex="135px" >
                                            <span> {{GestartedWann(sess)}}</span>
                                        </div>
                                    </ng-container>

                                    <ng-container *ngIf='StartButtonVisible'>
                                        <div class="center-item" layout-align="center center" fxFlex="auto">
                                            <a [ngClass]="['ml-5','link-button-font', 'HG-01']" 
                                            mat-flat-button
                                                (click)="startSession($event,sess)">{{StartButtonText(sess)}}</a>
                                        </div>
    <!-- 
                                        <div class="center-item" layout-align="center center" fxFlex="auto">
                                            <a [ngClass]="['ml-5', 'link-button-font', 'HG-01']" 
                                            mat-flat-button
                                                (click)="resetSession($event, sess, i+1)">Reset Session</a>
                                        </div> -->


                                        <ng-container *ngIf="sess.IstAusVorgabe === false && ModulTyp !== programModul.History">
                                            <div class="center-item" layout-align="center center" fxFlex="0 0 auto">
                                                <a [ngClass]="['link-button-font', 'HG-01']" mat-flat-button (click)="DeleteSession($event,sess, i+1)">Delete</a>
                                            </div>
                                        </ng-container>
                                    
                                    </ng-container>
                                </div>
                            </mat-expansion-panel-header>

                            <ng-container *ngIf="ViewInitDone === true && sess.UebungsListe.length > 0">
                                <div [id]="'collapseSession' + i" aria-labelledby="headingOne">
                                    <div class="card-body">
                                        <!-- session an Sub-Komponente durchreichen -->
                                        <app-programm03 
                                            [session]="sess" 
                                            [cmpSession]="sess" 
                                            [programm]="programm"
                                            [cmpSettingsSession]="sess" 
                                            [bearbeitbar]="bearbeitbar" 
                                            [SofortSpeichern]="SofortSpeichern"
                                            [DeletedSatzList]="DeletedSatzList">
                                        </app-programm03>
                                    </div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="showButtons">
                                <div fxLayout="row wrap" fxLayout.lt-sm="row wrap" fxLayoutAlign="center">
                                    <div class="center-item" layout-align="center center">
                                        <a [ngClass]="['link-button-font', 'HG-01']" mat-flat-button (click)="CopySession(sess)">Copy Session</a>
                                    </div>

                                    <div class="center-item" layout-align="center center">
                                        <a [ngClass]="['link-button-font', 'HG-01']" mat-flat-button (click)="DeleteSession($event, sess,i)">Delete Session</a>
                                    </div>
                                </div>

                                <div fxLayout="row wrap" fxLayout.lt-sm="row wrap" fxLayoutAlign="center">
                                    <div class="center-item" layout-align="center center">
                                        <a [ngClass]="['link-button-font', 'HG-01']" mat-flat-button (click)="AddExercise(sess)">Add exercise</a>
                                    </div>

                                    <div class="center-item" layout-align="center center">
                                        <a [ngClass]="['link-button-font', 'HG-01']" mat-flat-button (click)="PasteExcercise(sess)">Paste Exercise</a>
                                    </div>
                                </div>
                            </ng-container>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="ModulTyp !== programModul.History">
        <ng-container *ngIf="showButtons">
            <div fxLayout="row wrap" fxLayout.lt-sm="row wrap" fxLayoutAlign="center" [style.margin-top]="'5px'">
                <div class="center-item link-button-font" layout-align="center center">
                    <a class='link-button-font' mat-flat-button (click)="AddSession()">Add Session</a>
                </div>
            <div class="center-item" layout-align="center center">
                <a class='link-button-font' mat-flat-button (click)="PasteSession()">Paste Session</a>
            </div>
        </div>
        </ng-container>

        <ng-container *ngIf="showSaveButtons">
            <div fxLayout="row wrap" fxLayout.lt-sm="row wrap" fxLayoutAlign="center" [style.margin-top]="'5px'">
                <div class="center-item" layout-align="center center">
                    <a class='link-button-font' mat-flat-button (click)="SaveChanges()">Save</a>
                </div>
                <div class="center-item" layout-align="center center">
                    <a class='link-button-font' mat-flat-button (click)="CancelChanges()">Cancel</a>
                </div>
            </div>
        </ng-container>
    </ng-container>
</div>